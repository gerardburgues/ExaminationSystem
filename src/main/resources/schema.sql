CREATE TABLE "User" (User_ID int GENERATED BY DEFAULT AS IDENTITY, Name varchar(40) NOT NULL, Surname varchar(40) NOT NULL, Email varchar(40), Password varchar(25), PESEL int, PRIMARY KEY (User_ID));
CREATE TABLE Student (Student_ID int GENERATED BY DEFAULT AS IDENTITY, Index_No int, User_ID int NOT NULL, PRIMARY KEY (Student_ID));
CREATE TABLE Professor (Professor_ID int GENERATED BY DEFAULT AS IDENTITY, User_ID int NOT NULL, Department_ID int NOT NULL, PRIMARY KEY (Professor_ID));
CREATE TABLE Department (Department_ID int GENERATED BY DEFAULT AS IDENTITY, Name varchar(100) NOT NULL, PRIMARY KEY (Department_ID));
CREATE TABLE Course (Course_ID int GENERATED BY DEFAULT AS IDENTITY, Name varchar(100) NOT NULL, Description varchar(500), Professor_ID int, PRIMARY KEY (Course_ID));
CREATE TABLE Test (Test_ID int GENERATED BY DEFAULT AS IDENTITY, StartDate date NOT NULL, StartTime timestamp NOT NULL, DurationMinutes int NOT NULL, Course_ID int NOT NULL, PRIMARY KEY (Test_ID));
CREATE TABLE Question (Question_ID int GENERATED BY DEFAULT AS IDENTITY, QuestionType_ID int NOT NULL, Test_ID int NOT NULL, PRIMARY KEY (Question_ID));
CREATE TABLE StudentCourse (StudentCourse_ID int GENERATED BY DEFAULT AS IDENTITY, FinalGrade double, Course_ID int NOT NULL, Student_ID int NOT NULL, PRIMARY KEY (StudentCourse_ID));
CREATE TABLE StudentDepartment (StudentSepartment_ID int GENERATED BY DEFAULT AS IDENTITY, Department_ID int NOT NULL, Student_ID int NOT NULL, PRIMARY KEY (StudentSepartment_ID));
CREATE TABLE QuestionType_ENUM (QuestionType_ID int GENERATED BY DEFAULT AS IDENTITY, Name varchar(50) NOT NULL, PRIMARY KEY (QuestionType_ID));
CREATE TABLE Answer (Answer_ID int GENERATED BY DEFAULT AS IDENTITY, Value varchar(100) NOT NULL, IsCorrect bit NOT NULL, Question_ID int NOT NULL, PRIMARY KEY (Answer_ID));
CREATE TABLE StudentTest (StudentTest_ID int GENERATED BY DEFAULT AS IDENTITY, Mark double, Test_ID int NOT NULL, Student_ID int NOT NULL, PRIMARY KEY (StudentTest_ID));
CREATE UNIQUE INDEX User_User_ID ON "User" (User_ID);
CREATE UNIQUE INDEX Student_Student_ID ON Student (Student_ID);
CREATE UNIQUE INDEX Student_Index_No ON Student (Index_No);
CREATE UNIQUE INDEX Professor_Professor_ID ON Professor (Professor_ID);
CREATE UNIQUE INDEX Department_Department_ID ON Department (Department_ID);
CREATE UNIQUE INDEX Course_Course_ID ON Course (Course_ID);
CREATE UNIQUE INDEX Test_Test_ID ON Test (Test_ID);
CREATE UNIQUE INDEX Question_Question_ID ON Question (Question_ID);
CREATE UNIQUE INDEX StudentCourse_StudentCourse_ID ON StudentCourse (StudentCourse_ID);
CREATE UNIQUE INDEX StudentDepartment_StudentSepartment_ID ON StudentDepartment (StudentSepartment_ID);
CREATE UNIQUE INDEX QuestionType_ENUM_QuestionType_ID ON QuestionType_ENUM (QuestionType_ID);
CREATE UNIQUE INDEX Answer_Answer_ID ON Answer (Answer_ID);
CREATE UNIQUE INDEX StudentTest_StudentTest_ID ON StudentTest (StudentTest_ID);
ALTER TABLE StudentCourse ADD CONSTRAINT FKStudentCou607687 FOREIGN KEY (Course_ID) REFERENCES Course (Course_ID);
ALTER TABLE StudentCourse ADD CONSTRAINT FKStudentCou57934 FOREIGN KEY (Student_ID) REFERENCES Student (Student_ID);
ALTER TABLE StudentDepartment ADD CONSTRAINT FKStudentDep795035 FOREIGN KEY (Department_ID) REFERENCES Department (Department_ID);
ALTER TABLE StudentDepartment ADD CONSTRAINT FKStudentDep576748 FOREIGN KEY (Student_ID) REFERENCES Student (Student_ID);
ALTER TABLE Student ADD CONSTRAINT FKStudent776731 FOREIGN KEY (User_ID) REFERENCES "User" (User_ID);
ALTER TABLE Professor ADD CONSTRAINT FKProfessor186734 FOREIGN KEY (User_ID) REFERENCES "User" (User_ID);
ALTER TABLE Question ADD CONSTRAINT FKQuestion738934 FOREIGN KEY (QuestionType_ID) REFERENCES QuestionType_ENUM (QuestionType_ID);
ALTER TABLE Professor ADD CONSTRAINT FKProfessor497919 FOREIGN KEY (Department_ID) REFERENCES Department (Department_ID);
ALTER TABLE Course ADD CONSTRAINT FKCourse417870 FOREIGN KEY (Professor_ID) REFERENCES Professor (Professor_ID);
ALTER TABLE Test ADD CONSTRAINT FKTest532387 FOREIGN KEY (Course_ID) REFERENCES Course (Course_ID);
ALTER TABLE StudentTest ADD CONSTRAINT FKStudentTes255205 FOREIGN KEY (Test_ID) REFERENCES Test (Test_ID);
ALTER TABLE StudentTest ADD CONSTRAINT FKStudentTes853504 FOREIGN KEY (Student_ID) REFERENCES Student (Student_ID);
ALTER TABLE Answer ADD CONSTRAINT FKAnswer148598 FOREIGN KEY (Question_ID) REFERENCES Question (Question_ID);
ALTER TABLE Question ADD CONSTRAINT FKQuestion230558 FOREIGN KEY (Test_ID) REFERENCES Test (Test_ID);





/*CREATE TABLE USER(


   USER_ID INT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(250) NOT NULL,
    SURNAME VARCHAR(250) NOT NULL,
    EMAIL VARCHAR(250) NOT NULL,
    PASSWORD VARCHAR(250) NOT NULL,
    PESELS DOUBLE (250) NOT NULL
);


INSERT INTO USER (name, surname, email, password, pesel) VALUES
('Gerard', 'Burgues', 'gerard@gmail.com', '123', 00000);

CREATE TABLE DEPARTMENT(
                           DEPARTMENT_ID INT AUTO_INCREMENT PRIMARY KEY ,
                           NAME VARCHAR(150)

);
CREATE TABLE PROFESSOR(
    USER_ID INT,
    PROFESSOR_ID INT AUTO_INCREMENT PRIMARY KEY,
    DEPARTMENT_ID INT,
    FOREIGN KEY (USER_ID) REFERENCES  USER (USER_ID),
    FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT(DEPARTMENT_ID)


);

CREATE TABLE STUDENT(

    USER_ID INT,
    INDEX_NO INT,
    STUDENT_ID INT AUTO_INCREMENT PRIMARY KEY,
    FOREIGN KEY (USER_ID) REFERENCES USER (USER_ID)
);
CREATE TABLE COURSE(
    COURSE_ID INT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(150),
    DESCRIPTION VARCHAR(500),
    PROFESSOR_ID INT,
    FOREIGN KEY (PROFESSOR_ID) REFERENCES PROFESSOR (PROFESSOR_ID)
);

CREATE TABLE TEST(
    TEST_ID INT AUTO_INCREMENT PRIMARY KEY,
    STARTDATE DATE,
    STARTTIME TIMESTAMP,
    DURATIONMINUTES INT,
    COURSE_ID INT,
    FOREIGN KEY (COURSE_ID) REFERENCES COURSE (COURSE_ID)

);


CREATE TABLE QUESTION(
    QUESTION_ID INT AUTO_INCREMENT PRIMARY KEY ,
    QUESTIONTYPE_ID INT,
    TEST_ID INT,
    FOREIGN KEY (TEST_ID) REFERENCES TEST(TEST_ID),
    FOREIGN KEY (QUESTIONTYPE_ID) REFERENCES QUESTIONTYPE_ENUM(QUESTIONTYPE_ID)

);
CREATE TABLE QUESTIONTYPE_ENUM(

    QUESTIONTYPE_ID INT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(50)
);

CREATE TABLE ANSWER(
    ANSWER_ID INT AUTO_INCREMENT PRIMARY KEY ,
    VALUE VARCHAR(100),
    ISCORRECT BIT,
    QUESTION_ID INT,
    FOREIGN KEY (QUESTION_ID) REFERENCES QUESTION (QUESTION_ID)

);

CREATE TABLE STUDENTTEST(
    STUDENTEST_ID INT AUTO_INCREMENT PRIMARY KEY ,
    MARK DOUBLE,
    TEST_ID INT,
    STUDENT_ID INT,
    FOREIGN KEY (TEST_ID) REFERENCES TEST(TEST_ID),
    FOREIGN KEY  (STUDENT_ID) REFERENCES STUDENT(STUDENT_ID)

);

CREATE TABLE STUDENTCOURSE(
    STUDENTCOURSE_ID INT AUTO_INCREMENT PRIMARY KEY ,
    FINALGRADE DOUBLE,
    COURSE_ID INT,
    STUDENT_ID INT,
    FOREIGN KEY (COURSE_ID) REFERENCES COURSE(COURSE_ID),
    FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT(STUDENT_ID)

);
CREATE TABLE STUDENTDEPARTMENT (
    STUDENTSDEPARMENT_ID INT AUTO_INCREMENT PRIMARY KEY ,
    DEPARMENT_ID INT,
    STUDENT_ID INT,
    FOREIGN KEY (DEPARMENT_ID) REFERENCES DEPARTMENT(DEPARTMENT_ID),
    FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT(STUDENT_ID)
)*/